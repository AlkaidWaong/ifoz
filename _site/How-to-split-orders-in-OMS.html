<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>OMS订单系统中的拆单过程 | Alkaid’s Blog</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="OMS订单系统中的拆单过程" />
<meta name="author" content="Alkaid" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="工作中经常接触订单相关的内容，没有系统的整理过。最近有空了打算整理归纳也有助增加自己的理解。先从拆单服务讲起吧。" />
<meta property="og:description" content="工作中经常接触订单相关的内容，没有系统的整理过。最近有空了打算整理归纳也有助增加自己的理解。先从拆单服务讲起吧。" />
<link rel="canonical" href="https://blog.ifoz.net/How-to-split-orders-in-OMS" />
<meta property="og:url" content="https://blog.ifoz.net/How-to-split-orders-in-OMS" />
<meta property="og:site_name" content="Alkaid’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-12-18T20:54:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="OMS订单系统中的拆单过程" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alkaid"},"dateModified":"2022-12-18T20:54:00+08:00","datePublished":"2022-12-18T20:54:00+08:00","description":"工作中经常接触订单相关的内容，没有系统的整理过。最近有空了打算整理归纳也有助增加自己的理解。先从拆单服务讲起吧。","headline":"OMS订单系统中的拆单过程","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.ifoz.net/How-to-split-orders-in-OMS"},"url":"https://blog.ifoz.net/How-to-split-orders-in-OMS"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->

    <!-- 谷歌收录验证 -->
  <meta name="google-site-verification" content="rfXv47XC2WF7BqtHmKR3nj2TZxP-opU4kYnrZUmcPgM" />
    <!-- 百度收录验证 -->
  <meta name="baidu-site-verification" content="codeva-b1eGVA4oQ8" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="https://blog.ifoz.net/feed.xml" title="Alkaid's Blog" />
  
   <!-- 百度统计代码 -->
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?12afa0b54500f20cf5fe37f34e44e775";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>

  <!-- Google Analytics
  
	  
	  -->
</head>


  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/" >
      <h2 class="nav-title">Alkaid's Blog</h2>
    </a>
    <ul>
      <li><a href="/">Posts</a></li>
      <li><a href="/tags">Archives</a></li>
      <li><a href="/about">About</a></li>
	    <li><a href="/BedtimeStories">🎙 Podcast</a></li>
    </ul>
  </div>
</nav>


    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        Alkaid
    

    
      <br>
      <span>on&nbsp;</span><time datetime="2022-12-18 20:54:00 +0800">2022年12月18日</time>
    
  </div>

  <h1 class="post-title">OMS订单系统中的拆单过程</h1>
  <div class="post-line"></div>

  <p>工作中经常接触订单相关的内容，没有系统的整理过。最近有空了打算整理归纳也有助增加自己的理解。先从拆单服务讲起吧。</p>

<h3 id="什么是拆单">什么是拆单</h3>
<p>拆单，是将一个大订单按照设定的业务规则拆分成若干个子订单的过程。
一般在网购时，在浏览商品，将若干商品加入购物车，提交订单后你会发现你有两个或若干个订单，这里就是拆单服务来完成的工作。</p>

<h3 id="为什么要拆单">为什么要拆单</h3>

<p>拆单是优化用户购物体验的一种手段，具体来说是优化履单时效。举几个场景的案例就比较好理解：</p>

<p><strong>库存不足而拆单</strong>
用户下单多个商品，其中部分商品库存不足，那么拆单后有库存的部分可以先发货。现在这种做法比较少了，更常见是在下单前校验库存。</p>

<p><strong>商家不同而拆单</strong></p>

<p>这种情况一般发生在平台类电商业务中，订单的商品由多个商家提供时，不同商家在仓、货和物流上存在差异。在生活服务领域中，一个订单由多个工序（商家）来完成时需要拆单。例如，系统门窗安装这个业务中，有吊装/搬运，安装，防水等多个工序，需要分别指派不同商家来完成需要拆单。</p>

<p><strong>仓库不同而拆单</strong>
在自营类电商业务中，订单中的商品由多个仓库发货，拆单后可尽快发货。</p>

<p><strong>商品属性差异而拆单</strong>
用户下单的商品中有海鲜、冰淇淋等带温控属性商品需要拆单，这里拆单利于保障商品送达交付的品质。</p>

<p>除了需要拆单的情况，还有一些情况是不能拆单：</p>

<ul>
  <li>在O2O中，同一线下门店购买的商品一般情况不拆单；</li>
  <li>组合套餐商品如果在仓库是一体打包的，一般情况也不拆单；</li>
</ul>

<h3 id="怎么拆单">怎么拆单</h3>

<p>拆单服务是在订单支付后，由OMS系统中<strong>拉单服务</strong>将订单同步到后端生产库后开始拆单。另外也有在前端也有进行拆单的做法，这里拆单是由商品系统中定义商品的拆单规则，前端系统提交订单时已经做了拆单。（这里拆单时没有提交订单！）</p>

<p>拆单服务有两个特别重要的工作：父订单和金额分摊。</p>

<p><strong>拆单后父订单处理</strong>
拆单后父订单需要变更状态为无效。</p>

<p><strong>拆单后的订单金额分摊处理</strong>
<strong>订单金额分摊</strong>：要将父订单的金额合理、准确的分摊到子订单上，首先要明确订单金额哪些部分要做分摊？常见的有订单商品金额、优惠金额（优惠券、活动等）、特定方式支付金额（积分、卡券）、订单支付金额等部分。</p>

<p>在拆单的子订单中要保证所有子订单金额的和与父订单一致，同时与订单支付明细、订单商品明细中金额也一致。</p>

<p><strong>运费分摊</strong>：一般运费信息是记在订单信息关联的支付信息表中，拆单后也需要按订单金额比例分摊到子订单中。</p>

<p><strong>开票金额分摊</strong>：也是要分摊到子订单的，这主要是财务上要求单据和发票一致（缴税）。</p>

<p>拆单中设计大量的计算工作，为了保证拆单速度可以考虑将金额分摊独立出来。</p>

<h3 id="总结">总结</h3>

<p>拆单要根据业务的差异考量对履单时效的影响。合理、准确的拆单能提升履单时效。拆单过多会增加后续售后、分摊计算和数据统计等环节的复杂度。</p>

</div>



<div class="pagination">
  
    <a href="/Talk-about-order-status" class="left arrow">&#8592;Previous</a>
  
  
    <a href="/To-disassemble-the-filter-net-of-a-Xiaomi-air-conditioner" class="right arrow">Next&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>
    </main>

    <footer>
  <span>
    &copy; <time datetime="2023-12-18 23:14:05 +0800">2023</time> Alkaid. Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>

  </body>
</html>
